<head>
   <title>T or N</title>
   <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
   <style>
   body {color:white; font-size:140px; font-family:"Lucida Sans Unicode", "Lucida Grande", sans-serif; background-color:#000000; white-space: nowrap;}
   p.prediction {
     line-height:70%;
     margin-top:100px;
     margin-right:50px;
     }
   </style>
</head>


<!DOCTYPE html>
<html>
<body>
  <p>
  <script>
function fetchPredictions(url, muniLine){
  d3.xml(url, function(xml) {
    var minutes =  d3.select(xml).selectAll("prediction")[0].map(function(prediction){
      return d3.select(prediction).attr("minutes");
      });
      if (minutes.length===0){
        d3.select(muniLine).text("--")
      }
      else{ 
        d3.select(muniLine).text(minutes)
      }
    });
} 

<!-- This is where you plug in your stopId and routeTag  -->

function refreshPredictions(){
  
  // K-Ingleside T-Third Street
  fetchPredictions("http://webservices.nextbus.com/service/publicXMLFeed?command=predictions&a=sf-muni&stopId=17166&routeTag=KT", "#T-Third") 

  // N-Judah
  fetchPredictions("http://webservices.nextbus.com/service/publicXMLFeed?command=predictions&a=sf-muni&stopId=15240&routeTag=N", "#N-Judah") 
}
  

refreshPredictions()
window.setInterval(refreshPredictions,7500);
  </script>
  </p>
  
  <div id="predictions">
    <p class = "prediction"><span style="color:9966FF;font-weight:bold">T: </span><span id="T-Third"></span id></p>
    <p>or<p>
  <p class = "prediction"><span style="color:FF00FF;font-weight:bold">N: </span><span id="N-Judah"></span id></p>
  </div>
</body>
</html>
